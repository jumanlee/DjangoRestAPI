# App demo on Youtube

A video demo of the app is available at: https://www.youtube.com/watch?v=0zXZ8ZeTn-k

# Introduction

This project involves the implmenetation of REST API endpoints for bioscience researchers working on protein domains. The API allows the researchers to regularly query for the data they've generated. The API endpoints specification and data are explained further in below sections. All the bioscience data is stored in the three csv files, which the python script that I have written will transfer all into the default sqlite database. This will happen after you run the migration and then the python script, explained in the next section. Note that this project is my completed mid-term project for my web development module at the University of London.

# Instructions

First, to launch the web service on your machine, you will need to do the following: 

At the root of the directory: <br />
1) (For MacOS) Create a virtual environment by running: python3 -m venv YourEnvironmentName <br />
2) (For MacOS) Switch to the virtual environment by running: source YourEnvironmentName/bin/activate <br />
3) To install all the dependencies, run: pip install -r requirements.txt  <br />
4) Run migration: python manage.py migrate <br />
5) Run the python script to transfer csv file data to sqlite, this will take a few minutes due to large data volume: python scripts/populate_data.py  <br />
6) Then you can start the server: python manage.py runserver 127.0.0.1:8080 <br />

# Data explanation

Organisms are categorised using Taxonomy, which assigns them a Genus and Species name and assigns a unique ID number to each species through the NCBI Taxonomy Database. In summary, the relationships between the different sets of data are described as: <br />

Organisms have multiple Proteins <br />
Organisms have a Genus name <br />
Organisms have a Species name <br />
Proteins have multiple domains <br />
Proteins have a single sequence <br />
Domains have a single Pfam domain ID <br />

The relationships between the various data sets form the foundation for the design of the tables, including the identification of primary and foreign key relationships and the allocation of data to specific tables. <br />

The file proteinsequence.csv contains the amino acid sequences of proteins, wherein each record is composed of two columns. The first column represents the Protein ID, and the second column includes the sequence of the protein in single letter code. The maximum length of the sequences present in the dataset is slightly less than 40,000 characters. Note that not all proteins in the dataset are accompanied by sequences. <br />

protein ID <br />
Protein Sequence <br />

The proteinorganism.csv file contains annotations of protein domains. Each row represents a Protein Domain assigned to a different Protein, and there are 10,000 records in total. The columns in the file are: <br />

Protein ID, <br />
Organism TAXA ID, <br />
Organism Clade Idenitifer <br />
Organism Scientific name ("Genus Species") <br />
Domain description <br />
Domain ID <br />
Domain Start Coordinate <br />
Domain End Coordinate <br />
Length of Protein <br />


The pfam.csv file has two columns: <br />

Domain/Pfam IDs <br />
Domain/Pfam Family description <br />


# API endpoints specification

REST Specification: <br />

`````
POST http://127.0.0.1:8080/api/protein/ - add a new record 
GET  http://127.0.0.1:8080/api/protein/[PROTEIN ID] - return the protein sequence and all we know about it
http://127.0.0.1:8080/api/protein/A0A016S8J7 returns 
{
    "protein_id": "A0A016S8J7",
    "sequence": "MVIGVGFLLVLFSSSVLGILNAGVQLRIEELFDTPGHTNNWAVLVCTSRFWFNYRHVSNVLALYHTVKRLGIPDSNIILMLAEDVPCNPRNPRPEAAVLSA",
    "taxonomy": {
        "taxa_id": 53326,
        "clade": "E",
        "genus": "Ancylostoma",
        "species": "ceylanicum"
    },
    "length": 101,
    "domains": [
        {
            "pfam_id": {
                "domain_id": "PF01650",
                "domain_description": "PeptidaseC13family"
            },
            "description": "Peptidase C13 legumain",
            "start": 40,
            "stop": 94
        },
        {
            "pfam_id": {
                "domain_id": "PF02931",
                "domain_description": "Neurotransmitter-gatedion-channelligandbindingdomain"
            },
            "description": "Neurotransmitter-gated ion-channel ligand-binding domain",
            "start": 23,
            "stop": 39
        }
    ]
}

GET  http://127.0.0.1:8080/api/pfam/[PFAM ID] - return the domain and it's deacription
http://127.0.0.1:8080/api/pfam/PF00360 returns 
{
    "domain_id": "PF00360",
    "domain_description": "Phytochromeregion"
}

GET  http://127.0.0.1:8080/api/proteins/[TAXA ID] - return a list of all proteins for a given organism
NOTE: "id" here is sequential the primary key value generated by django for the table that holds the domain data
http://127.0.0.1:8080/api/proteins/55661 returns 
[
    {
        "id": 88766,
        "protein_id": "A0A091FY39"
    },
    {
        "id": 88761,
        "protein_id": "A0A091FMY9"
    },
    {
        "id": 88762,
        "protein_id": "A0A091FQA9"
    },
    {
        "id": 88763,
        "protein_id": "A0A091FRU1"
    },
    {
        "id": 88764,
        "protein_id": "A0A091FUC2"
    },
    {
        "id": 88765,
        "protein_id": "A0A091FX61"
    },
    {
        "id": 88767,
        "protein_id": "A0A091G8V7"
    },
    {
        "id": 88768,
        "protein_id": "A0A091GCF7"
    },
    {
        "id": 88769,
        "protein_id": "A0A091GK66"
    },
    {
        "id": 88770,
        "protein_id": "A0A091GM81"
    },
    {
        "id": 88771,
        "protein_id": "A0A091GMX7"
    },
    {
        "id": 88772,
        "protein_id": "A0A091GY85"
    }
]

GET  http://127.0.0.1:8080/api/pfams/[TAXA ID] - return a list of all domains in all the proteins for a given organism. 
NOTE: "id" here is sequential the primary key value generated by django for the table that holds the domain data
http://127.0.0.1:8080/api/pfams/55661 returns 
[
    {
        "id": 88896,
        "pfam_id": {
            "domain_id": "mobidb-lite",
            "domain_description": "disorder prediction"
        }
    },
    {
        "id": 88891,
        "pfam_id": {
            "domain_id": "PF00307",
            "domain_description": "Calponinhomology(CH)domain"
        }
    },
    {
        "id": 88892,
        "pfam_id": {
            "domain_id": "PF00415",
            "domain_description": "Regulatorofchromosomecondensation(RCC1)repeat"
        }
    },
    {
        "id": 88893,
        "pfam_id": {
            "domain_id": "PF07648",
            "domain_description": "Kazal-typeserineproteaseinhibitordomain"
        }
    },
    {
        "id": 88894,
        "pfam_id": {
            "domain_id": "PF16172",
            "domain_description": "DOCKN-terminus"
        }
    },
    {
        "id": 88895,
        "pfam_id": {
            "domain_id": "mobidb-lite",
            "domain_description": "disorder prediction"
        }
    },
    {
        "id": 88897,
        "pfam_id": {
            "domain_id": "mobidb-lite",
            "domain_description": "disorder prediction"
        }
    },
    {
        "id": 88898,
        "pfam_id": {
            "domain_id": "mobidb-lite",
            "domain_description": "disorder prediction"
        }
    },
    {
        "id": 88899,
        "pfam_id": {
            "domain_id": "mobidb-lite",
            "domain_description": "disorder prediction"
        }
    },
    {
        "id": 88900,
        "pfam_id": {
            "domain_id": "PF00041",
            "domain_description": "FibronectintypeIIIdomain"
        }
    },
    {
        "id": 88901,
        "pfam_id": {
            "domain_id": "PF02141",
            "domain_description": "DENN(AEX-3)domain"
        }
    },
    {
        "id": 88902,
        "pfam_id": {
            "domain_id": "PF14260",
            "domain_description": "C4-typezinc-fingerofDNApolymerasedelta"
        }
    }
]

GET  http://127.0.0.1:8080/api/coverage/[PROTEIN ID] - return the domain coverage for a given protein. That is Sum of the protein domain lengths (start-stop)/length of protein. 
http://127.0.0.1:8080/api/coverage/A0A016S8J7 returns 
coverage:	0.693069306930693
`````